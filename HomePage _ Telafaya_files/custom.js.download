//============EXTERNAL PLUGINS & CDN's===================
	// Owl Carousel
	// Price range slider on listing
	// Star rating (rateYo) for ratings
	// Font Awesome CDN
	// jQuery UI js n CSS
	// jQuery Calendar


$(document).ready(function() {

				// $('.drop').click(function(e){
				// 	e.stopPropagation();
				// 	console.log('dgag');
				// 	$(this).toggleClass('selected');
				// 	$(this).find('.drop_list').toggle();
				// });
				// $('#home_search_input').focusin(function(){
			 //    	$('.looking_list').show();
			 //    });

				// $('html').click(function() {
			 //      $('.city_list').hide();
			 //      $('.drop').removeClass('selected');
			 //    });




				$('.drop').click(function(e){
					e.stopPropagation();
					$(this).toggleClass('selected');
					if($(this).hasClass('selected')){
						// console.log('hello');
						$('.home').css({'position':'relative','z-index':'4'});
					}
					else{
						$('.home').css({'position':'relative','z-index':'1'});
					}
					$(this).find('.drop_list').toggle();
					 // $(document).bind('click.drop_list',function(e) {
				  //      if ($(e.target).closest('.drop_list, .drop').length) return;
				  //      $(document).unbind('.drop_list');
				  //      $('.drop_list').fadeOut('medium');
				  //   });
				});

				$('#home_search_input').focusin(function(){ 
					$(this).addClass('selected');
				$('.looking_list').show().addClass('active'); 
				$('.home').css({'position':'relative','z-index':'4'});
				});


				$('.city_list li').click(function(){
					var value = getValue(this);
					$(this).parent().prev().text(value);
				});

				$('.looking_list li').click(function(){
					// var value = getValue(this);
					$('.home').css({'position':'relative','z-index':'1'});
					// $('#home_search_input').val(value);
					// $(this).parent().prev().find('input[type="text"]').val(value);
					// console.log($(this).parent());
					$('.looking_list').hide();
					
				});

				// =================Update the dropdown value==============
				function getValue(temp){
					$(temp).addClass('active');
					var value = $(temp).text();
					return value;
				};


				$('.check').click(function(){
					$(this).toggleClass('selected');
					$(this).prev().attr('data-value','1');
				});


				$('.bullet_indicators li').click(function(){
				   	$(this).removeClass('disabled').addClass('active');
				   	var temp = $(this).attr('rel');
				   	temp = parseFloat(temp);
				   	if(temp === 4){
				   	$(this).addClass('done').removeClass('active');
				   	}
				   	getActive(temp);
				   });
				   function getActive(var2){
				   	$('.journey_content .journey_steps').hide().removeClass('active');
				   	$('.journey_content').find('.journey_steps[data-rel="'+var2+'"]').show().addClass('active');
				   	for(var i=1; i<var2; i++){
				   	$('.bullet_indicators li[rel="'+i+'"]').removeClass('active').addClass('done');
				   	}
				   	if(var2 === 4){
				   		$('.side_content').hide();
				    	$('.journey_content').css('width','100%');
				   	}
				   	else{
				   		$('.side_content').show();
					    $('.journey_content').css('width','75%');
				   	}
				}

				    $('.paymentmode').on('click',getContent);

				    function getContent(e){
				        e.preventDefault();
				    	$('.paymentmodemenu li').removeClass('active');
				    	$(this).parent().addClass('active');
				    	var partnerID = $(this).attr('rel');
				    	getFeatureContent(partnerID);
				    }
    				$('select.dropSelect').on('change', getData);

				    function getData(e){
				        e.preventDefault();
				        var dataID =$(this).val();
					   getFeatureContent(dataID);
				    }
				    function getFeatureContent(partnerID){
				    	$('paymentmodemenu li').removeClass('active');
				       $('a[rel="'+partnerID+'"]').each(function() {
				           $(this).parent().addClass('active');
				       });

				       $('option[value="'+partnerID+'"]').each(function() {
				           $(this).attr('selected','selected');
				       });
				    	$('.payment_section').hide();
				    	$('.payment_content').find('div.payment_section[data-rel ="'+partnerID+'"]').show();
				    }


				    $('.open_filter').click(function(){
				    	$(this).hide();
				    	$('.search_list_filters').show();
				    	$('.close_filter').show();
				    	$('.done_filter').show();
				    });
				    $('.close_filter, .done_filter').click(function(){
				    	$(this).hide();
				    	$('.search_list_filters').hide();
				    	$('.open_filter').show();
				    });
				    //increment decrement
				    $('.generic_list_item .increment').click(function(){
				    	var value = $(this).prev().html();
				    	value = parseFloat(value) + 1;
				    	$(this).prev().html(value);
				    	var name = 'increment';
						updateCartValue(name,value);
				    });

				    $('.generic_list_item .decrement').click(function(){
				    	var value = $(this).next().html();
				    	if(value >= 1){
				    		value = parseFloat(value) - 1;
				    		$(this).next().html(value);
				    	}
				    	if(value === 0){
				    		$(this).parent().css('display','none');
				    		$(this).parent().prev().show();
				    	}
				    	var name = 'decrement';
				    	updateCartValue(name,value);	
				    });

				    $('.generic_list_item .add_to_bag_btn').click(function() {
				    	var name = 'btn';
				    	updateCartValue(name,0);
				    	$(this).hide();
				    	$(this).next().css('display','flex');
				    });

				    	function updateCartValue(source,value) {
				    		// body...
				    		console.log(source);
				    		console.log(value);
				    		var tempValue = $('.header_cart span').html();
				    		console.log(tempValue);
				    		// if(source === 'btn'){
				    		// 	value = 1;
				    			var update = parseFloat(tempValue) + 1;
				    		// }
				    		// if(source === 'increment'){
				    		// 	var update = parseFloat(tempValue) + 1;
				    		// }
				    		if(source === 'decrement'){
				    			var update = parseFloat(tempValue) - 1;
				    		}

				    		// if(source === 'btn'){

				    		// }
					    	
					    	$('.cart span').html(update);
				    	}

				    // Increment decrement


				    $('.cart').click(function(){
				    	$('.cart_popup').toggle();
				    });


	    		$('#communityCarousel').owlCarousel({
		            loop: true,
		            center: true,
		            items: 3,
		            margin: 0,
		            autoplay: true,
		            dots:true,
		            autoplayTimeout: 6500,
		            smartSpeed: 450,
		            responsive: {
		              0: {
		                items: 1
		              },
		              768: {
		                items: 2
		              },
		              1170: {
		                items: 3
		              }
		            }
		        });
		        $('#clientCarousel').owlCarousel({
		            loop: true,
		            center: true,
		            items: 5,
		            margin: 0,
		            autoplay: true,
		            dots:true,
		            autoplayTimeout: 6500,
		            smartSpeed: 450,
		            responsive: {
		              0: {
		                items: 2
		              },
		              768: {
		                items: 3
		              },
		              1170: {
		                items: 5
		              }
		            }
		        });

	    		//Price range slider

	   //  		$( function() {
	   //  			var a = 10;
	   //  			var b = 1000;
	   //  			var c = 250;
	   //  			var d = 660;
				//     $( "#slider-range" ).slider({
				//       range: true,
				//       min: a,
				//       max: b,
				//       values: [ c, d ],
				//       slide: function( event, ui ) {
				//         $( "#amount" ).val( "$" + ui.values[ 0 ] + " - $" + ui.values[ 1 ] );
				//       }
				//     });
				//     $( "#amount" ).val( "$" + $( "#slider-range" ).slider( "values", 0 ) +
				//       " - $" + $( "#slider-range" ).slider( "values", 1 ) );
				// });

					var keypressSlider = document.getElementById('keypress');
					var input0 = document.getElementById('input-with-keypress-0');
					var input1 = document.getElementById('input-with-keypress-1');
					var inputs = [input0, input1];

					noUiSlider.create(keypressSlider, {
						start: [50, 150],
						connect: true,
						direction: 'ltr',
						range: {
							'min': [0],
							'max': 200
						},
						format: wNumb({
							decimals: 0,
							thousand: '.',
							prefix: ' $',
						})
					});



					keypressSlider.noUiSlider.on('update', function( values, handle ) {
						inputs[handle].value = values[handle];
					});

					function setSliderHandle(i, value) {
						var r = [null,null];
						r[i] = value;
						keypressSlider.noUiSlider.set(r);
					}

					// Listen to keydown events on the input field.
					inputs.forEach(function(input, handle) {

						input.addEventListener('change', function(){
							setSliderHandle(handle, this.value);
						});

						input.addEventListener('keydown', function( e ) {
							var values = keypressSlider.noUiSlider.get();
							var value = Number(values[handle]);
							// [[handle0_down, handle0_up], [handle1_down, handle1_up]]
							var steps = keypressSlider.noUiSlider.steps();
							// [down, up]
							var step = steps[handle];
							var position;

							// 13 is enter,
							// 38 is key up,
							// 40 is key down.
							switch ( e.which ) {
								case 13:
									setSliderHandle(handle, this.value);
									break;
								case 38:
									// Get step to go increase slider value (up)
									position = step[1];
									// false = no step is set
									if ( position === false ) {
										position = 1;
									}
									// null = edge of slider
									if ( position !== null ) {
										setSliderHandle(handle, value + position);
									}

									break;
								case 40:
									position = step[0];
									if ( position === false ) {
										position = 1;
									}
									if ( position !== null ) {
										setSliderHandle(handle, value - position);
									}
									break;
							}
						});
					});



				$(".rateYo").rateYo({
				    rating    : 3.5,
				    starWidth: "15px",
				    spacing   : "10px",
				    ratedFill: "#3d87cd",
				    normalFill: "#c1cbd4"
				});


			});